#!/usr/bin/env bash
reqFile="$1"
resFile="$2"
duration="$3"

source="rest_api"
level="COMPLETED"
request="$(cat $reqFile)"
request=$( echo "$request" | jq -sR . )
response="$(cat $resFile)"
response=$( echo "$response" | jq -sR . )
duration=$( echo "$duration" | jq -aR . )
timestamp=$( to-timestamp )
printf '{ "origin": "%s", "@timestamp": "%s", "source": "%s", "level": "%s", "request":%s, "response":%s, "duration":%s }\n' "$CONTECO_IMAGE" "$timestamp" "$source" "$level" "$request" "$response" "$duration"
